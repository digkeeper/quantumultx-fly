
#è‡ªç”¨è§„åˆ™å¤‡ä»½

[general]
server_check_url=http://cp.cloudflare.com/generate_204
dns_exclusion_list=*.cmpassport.com, *.jegotrip.com.cn, *.icitymobile.mobi, id6.me, *.pingan.com.cn, *.cmbchina.com
geo_location_checker=http://ip-api.com/json/?lang=zh-CN, https://raw.githubusercontent.com/Orz-3/Orz-3/master/QuantumultX/IP.js
resource_parser_url=https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/resource-parser.js
excluded_routes=239.255.255.250/32, 24.105.30.129/32, 185.60.112.157/32, 185.60.112.158/32, 182.162.132.1/32
udp_whitelist=1-442, 444-65535


[dns]
#ç¦ç”¨ç³»ç»Ÿ DNS ä»¥åŠ ipv6
#no-syetem
no-ipv6

#æŒ‡å®šçš„ dnsæœåŠ¡å™¨
server=114.114.114.114
server=202.141.176.93 
server=202.141.178.13
server=117.50.10.10
server=223.5.5.5
server=119.29.29.29
server=119.28.28.28

#æŒ‡å®šåŸŸåè§£ædns
address=/mtalk.google.com/108.177.125.188
server=/dl.google.com/119.29.29.29
server=/dl.l.google.com/119.29.29.29
server=/*.tencent.com/119.28.28.28
server=/*.weixin.com/119.28.28.28
server=/*.jd.com/119.28.28.28
server=/*.alipay.com/223.5.5.5
server=/*.taobao.com/223.5.5.5

[policy]
static=ğŸµ ç½‘æ˜“äº‘éŸ³ä¹,DIRECT, PROXY, server-tag-regex=(?=.*(music|ğŒğ®ğ¬ğ¢ğœ|Unbolck|ç½‘æ˜“äº‘|äº‘éŸ³ä¹|Music|Netease|ğŸ¶|è§£é”)),img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Netease_Music.png
static=Telegram, direct, proxy, reject
static=YouTube, direct, proxy, reject
static=Final, proxy, direct, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Final.png
static=Streaming, proxy, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Streaming.png

[server_remote]

https://raw.githubusercontent.com/yyn618/QuantumultX-Script/main/UnlockNetease.list, tag=ç½‘æ˜“äº‘éŸ³ä¹, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Netease_Music_Unlock.png, update-interval=172800, opt-parser=true, enabled=true

[filter_remote]

# ç½‘æ˜“äº‘éŸ³ä¹
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/NetEaseMusic/NetEaseMusic.list, tag=ğŸµ ç½‘æ˜“äº‘éŸ³ä¹, force-policy=ğŸµ ç½‘æ˜“äº‘éŸ³ä¹, update-interval=172800, opt-parser=true, enabled=true

# Block OTA update for iOS
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Module/Block/SoftwareUpdate.sgmodule, tag=â›”ï¸Block OTA Update(iOS), force-policy=reject, update-interval=172800, opt-parser=true, enabled=false

# Unbreak åç»­è§„åˆ™ä¿®æ­£
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Unbreak.list, tag=ğŸ”‚Unbreak, force-policy=direct, update-interval=172800, opt-parser=true, enabled=true

# Advertising å¹¿å‘Š
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Advertising.list, tag=ğŸ›¡Advertising, force-policy=reject, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/AdvertisingPlus.list#type=domain-set, tag=ğŸ›¡Advertising+, force-policy=reject, update-interval=172800, opt-parser=true, enabled=true

# Privacy éšç§
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Privacy.list, tag=ğŸ›¡ï¸Privacy, force-policy=reject, update-interval=172800, opt-parser=true, enabled=true

# Hijacking è¿è¥å•†åŠ«æŒæˆ–æ¶æ„ç½‘ç«™
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Hijacking.list, tag=ğŸ›¡ï¸Hijacking, force-policy=reject, update-interval=172800, opt-parser=true, enabled=true

# YouTube
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Video/YouTube.list, tag=ğŸYouTube, force-policy=YouTube, update-interval=172800, opt-parser=true, enabled=true

# Streaming å›½é™…æµåª’ä½“æœåŠ¡
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Streaming.list, tag=ğŸStreaming, force-policy=Streaming, update-interval=172800, opt-parser=true, enabled=true


# Telegram
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/Telegram/Telegram.list, tag=ğŸ“¨Telegram, force-policy=Telegram, update-interval=172800, opt-parser=true, enabled=true

# Global å…¨çƒåŠ é€Ÿ
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Global.list, tag=ğŸ‡ºğŸ‡³Global, force-policy=proxy, update-interval=172800, opt-parser=true, enabled=true

# Apple æœåŠ¡
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/Apple/Apple.list, tag=ï£¿Apple, force-policy=direct, update-interval=172800, opt-parser=true, enabled=true

# China ä¸­å›½ç›´è¿
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/China.list, tag=ğŸ‡¨ğŸ‡³China, force-policy=direct, update-interval=172800, opt-parser=true, enabled=true

[rewrite_remote]


# General
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Rewrite/General.conf, tag=ğŸ”€General, update-interval=172800, enabled=true

# Block OTA update for iPadOS, Requires "â›”ï¸Block OTA Update(iOS)" filter
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Module/Block/SoftwareUpdate.sgmodule, tag=â›”ï¸Block OTA Update(iPadOS), update-interval=172800, opt-parser=true, enabled=false

# Block Advertising
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Rewrite/Block/Advertising.conf, tag=ğŸ›¡Block Advertising, update-interval=172800, enabled=true

# Block Advertising+
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Rewrite/Block/AdvertisingPlus.conf, tag=ğŸ›¡Block Advertising+, update-interval=172800, enabled=true

# Block YouTube Ads
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Rewrite/Block/YouTubeAds.conf, tag=ğŸ›¡Block YouTube Ads, update-interval=172800, enabled=true

# è¥¿å® å»å¹¿å‘Š
https://raw.githubusercontent.com/yyn618/QuantumultX-Script/master/Script/JS_Ad.conf, tag=è¥¿å® å»å¹¿å‘Š, update-interval=172800, opt-parser=true, enabled=true
#è§£é”VIP
https://raw.githubusercontent.com/yyn618/QuantumultX-Script/master/Script/JS_Unlock.conf, tag=è¥¿å® è§£é”VIPï¼Œè§†é¢‘å€é€Ÿæ’­æ”¾, update-interval=172800,opt-parser=true, enabled=true

https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rewrite/QuantumultX/AdvertisingLite/AdvertisingLite.conf, tag=blackmatrix7 å»å¹¿å‘Šï¼ˆåŒ…å«ç¥æœºã€NobyDaï¼‰, update-interval=172800, opt-parser=true, enabled=false
[server_local]
#
# åªæœ‰ obfs=http, obfs=ws, obfs=ws, obfs=wss å¯ä»¥æœ‰å¯é€‰çš„ã€Œobfs-uriã€å­—æ®µã€‚
# wss ä¸­çš„ obfs-host å‚æ•°å°†ç”¨äº TLS æ¡æ‰‹å’Œ HTTP å¤´ä¸»æœºå­—æ®µï¼Œå¦‚æœæ²¡æœ‰ä¸º wss è®¾ç½® obfs-hostï¼Œåˆ™å°†ä½¿ç”¨æœåŠ¡å™¨åœ°å€ã€‚
# ç›®å‰ä¸æ”¯æŒ VMess å’Œ Trojan çš„ UDP relayã€‚
# å½“ä½¿ç”¨ obfs=ws å’Œ obfs=wss æ—¶ï¼ŒæœåŠ¡å™¨ç«¯å¯ä»¥é€šè¿‡å¸¦æœ‰ mux=0 çš„ v2ray-plugin æˆ– v2ray-core è¿›è¡Œéƒ¨ç½²ã€‚
# obfs plugin tls1.2 ticket auth æ¯” tls1.2 ticket fastauth å’Œ obfs tls å¤šä¸€ä¸ª RTTï¼Œä½ æœ€å¥½ä½¿ç”¨ tls1.2 ticket fastauthã€‚
# chacha20-ietf-poly1305 å’Œ chacha20-poly1305 åœ¨ VMess é…ç½®ä¸­å…·æœ‰ç›¸åŒçš„æ•ˆæœã€‚
#
# å¯é€‰å­—æ®µ tls13 ä»…ç”¨äºï¼šshadowsocks obfs=wss / vmess obfs=over-tls and obfs=wss / http over-tls=true / trojan over-tls=true
# [server_local] å®Œæ•´ç¤ºä¾‹è¯·æŸ¥çœ‹ã€Œç¤ºä¾‹ã€

[filter_local]
# Local Area Network å±€åŸŸç½‘
host-suffix, local, direct
ip-cidr, 192.168.0.0/16, direct
ip-cidr, 10.0.0.0/8, direct
ip-cidr, 172.16.0.0/12, direct
ip-cidr, 127.0.0.0/8, direct
ip-cidr, 100.64.0.0/10, direct
ip-cidr, 224.0.0.0/4, direct
ip6-cidr, fe80::/10, direct

final, Final

[rewrite_local]
# [rewrite_local] å®Œæ•´ç¤ºä¾‹è¯·æŸ¥çœ‹ã€Œç¤ºä¾‹ã€

[task_local]
#
# $task.fetch() ç»„æˆä¸€ä¸ª HTTP è¯·æ±‚å¹¶å¤„ç†å“åº”ï¼Œåªæ”¯æŒ text bodyã€‚å¦‚æœæ‚¨æƒ³è¦ serial requests è€Œä¸æ˜¯ current requestsï¼Œå¯ä»¥å°† $task.fetch() åµŒå…¥åˆ°å¦ä¸€ä¸ª $task.fetch() çš„å®Œæˆå¤„ç†ç¨‹åºä¸­ã€‚
#
# è„šæœ¬åº”ä¿å­˜åœ¨æœ¬åœ°ã€Œæˆ‘çš„ iPhone - Quantumult X - Scriptsã€æˆ–ã€ŒiCloud Drive - Quantumult X - Scriptsã€ä¸­ã€‚ç¤ºä¾‹ï¼šhttps://github.com/crossutility/Quantumult-X/blob/master/sample-task.js
#
# é»˜è®¤çš„ HTTP è¯·æ±‚è¶…æ—¶æ˜¯ 10 ç§’ã€‚
#
# æ”¯æŒ 5 æˆ– 6 ä¸ª cron å­—æ®µï¼Œä¸åŒ…æ‹¬å‘½ä»¤å­—æ®µã€‚
#

# [task_local] å®Œæ•´ç¤ºä¾‹è¯·æŸ¥çœ‹ã€Œç¤ºä¾‹ã€
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/streaming-ui-check.js, tag=ğŸ“ºæµåª’ä½“æœåŠ¡æŸ¥è¯¢, img-url=checkmark.seal.system, enabled=true

[http_backend]
#
# éƒ¨ç½²ä¸€ä¸ªæœ¬åœ° HTTP æœåŠ¡å™¨ï¼Œå¹¶ä½¿ç”¨ JavaScript è¿›è¡Œæ•°æ®å¤„ç†ã€‚
# è¾“å…¥å˜é‡ä¸ºï¼š$reqeust.urlã€$reqeust.pathã€$reqeust.headersã€$reqeust.bodyã€‚
# ä½¿ç”¨ $done è¾“å‡ºåƒ $done({status:"HTTP/1.1 200 OK"}, headers:{}, body:"here is a string") è¿™æ ·çš„è¿”å›å“åº”ã€‚
# æ­¤å¤–ï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨ç­¾åæˆ–ä»»ä½•å…¶ä»–éªŒè¯æ–¹æ³•æ¥éªŒè¯è¯·æ±‚æ˜¯å¦åˆæ³•ã€‚
# éƒ¨ç½²åæ‚¨åº”è¯¥é€šè¿‡ http://127.0.0.1:9999/your-path/your-api/. è¿›è¡Œè®¿é—®ã€‚æœåŠ¡å™¨é»˜è®¤ç›‘å¬ç«¯å£ä¸º 9999ï¼Œæ‚¨å¯ä»¥åœ¨UIä¸­è¿›è¡Œæ›´æ”¹ã€‚
#
# [http_backend] å®Œæ•´ç¤ºä¾‹è¯·æŸ¥çœ‹ã€Œç¤ºä¾‹ã€

[mitm]
#
# åªæœ‰ã€Œhostnameã€ä¸­çš„ TLS SNI æˆ–ç›®æ ‡åœ°å€å°†è¢« MitM å¤„ç†ã€‚
#
# é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä¸º HTTPS è¯·æ±‚å¯ç”¨ MitM æ—¶ï¼ŒQuantumult X ä¼šä»åŸç«™ç‚¹è·å–è¯ä¹¦ï¼ˆè¯ä¹¦ä¼šè¢«ç¼“å­˜ï¼‰ï¼Œä¿ç•™å¤§éƒ¨åˆ†éœ€è¦çš„åŸå§‹è¯ä¹¦ä¿¡æ¯ï¼Œå¹¶ä½¿ç”¨ MitM çš„ root CA é‡æ–°ç­¾åï¼Œè¿™æ˜¯æ¨èçš„ï¼ˆä¹Ÿæ˜¯æ¯”è¾ƒå…¼å®¹çš„ï¼‰MitM è¯ä¹¦åˆ›å»ºæ–¹å¼ã€‚
#
# å¶å°”æœ‰äº›ç”¨æˆ·å–œæ¬¢è°ƒè¯• HTTPS è¯·æ±‚ï¼Œå…¶åŸŸåä¸å­˜åœ¨ï¼Œæ‰€ä»¥åŸè¯ä¹¦æ ¹æœ¬ä¸å­˜åœ¨ã€‚å½“å‚æ•° simple_cert_hostname å‡ºç°çš„æ—¶å€™ã€‚å…¶ TLS SNI åç§°åœ¨ simple_cert_hostname(åŠ hostname) ä¸­çš„ HTTPS è¯·æ±‚å°†ä½¿ç”¨çº¯æœ¬åœ°ç”Ÿæˆçš„ MitM è¯ä¹¦ã€‚
#
# æ³¨æ„ï¼ï¼ï¼æ‚¨åº”è¯¥å§‹ç»ˆä¿æŠ¤æ‚¨çš„ CA å¯†ç å’Œ p12 çš„ç§å¯†æ€§ã€‚
#
;passphrase =
;p12 =
skip_validating_cert = true
;force_sni_domain_name = false
;simple_cert_hostname = non-existed-domain.com, *.non-connected-domain.com
;hostname = *.googlevideo.com
